todo list:

更新列表：
2019-10-10
1. 解决 窗口创建/关闭特效与窗口阴影冲突的问题
   现象:播放动画时，显示窗口阴影，破坏特效效果
   解决:播放动画前隐藏阴影；播放完毕，显示阴影，关闭特效无需处理
2. 添加窗口显示/隐藏特效，复用创建/关闭特效
   遗留问题:播放窗口显示特效时,特效闪动
3. 优化阴影创建逻辑，窗口/菜单没有阴影时不创建阴影窗口对象
4. CWndImplBase::CreateWnd 改为非纯虚函数，以方便创建没有子窗口的窗口
5. CWindowWnd 添加 MoveWindow 接口


2019-09-25
1. 控件 Progress/Slider 添加禁用状态
2. 优化 GifAnim 控件
3. 虚函数统一添加 virtual 关键字
4. 修复 Container 设置子控件启用状态可能导致崩溃的问题
5. 修复 List 控件禁用状态

2019-09-21
1. 更新 miniblink49 到版本 19.9.4.1(2019-9-4发布)

2019-08-26
1. List选中所有行时，自动更新表头中复选框的状态

2019-08-07
1. 优化编辑框的输入体验
   取消延时通知属性(delaytxtchange)必须 >= 300 毫秒的限制，原因见 2019-04-24 2.1
2. 更新 属性列表-new.xml

2019-07-18
1. 解决 Label 控件宽度问题
   说明：设置其宽度为20，边框为1。预期宽度为20，实际宽度为22，加上了边框的亮度。
2. 解决 CWndImplBase::Relayout 调整子窗口位置会覆盖边框的问题
3. 更新 miniblink49 到版本 19.7.17.1(2019-7-17发布)

2019-07-15
1. 解决启用 layered 并添加窗体显示特效时，编辑框由于获得焦点导致其所在位置显示异常的问题

2019-07-14
1. 优化渲染引擎
   内部使用 GDI/GDI+ 混合引擎，以 Gdiplus 为主，GDI 为辅。
2. 修复 ANSI 版本编译问题
3. 解决 Label 控件高度问题
   说明：设置其高度为20，边框为1。预期高度为20，实际高度为22，加上了边框的亮度。

2019-07-12
1. List的每一列都支持复选框
   说明：
   1. 删除 List 的 ischeckbox 属性
   2. ListHeaderItem 添加 checkable 属性
   3. ListLabelElement 不支持 复选框
2. MenuElement 控件的 checkitem 属性改名为 checkable

2019-06-27
1. 修复Edit控件属性charfilter解析逻辑不正确的问题

2019-06-10
1. 修复编译问题
2. 修复子菜单大小计算问题

2019-06-06
1. 修复多屏扩展模式菜单显示位置不正确的问题。

2019-06-01
1. 优化内边距属性，统一使用 padding ，所有控件都支持。
   说明：
   1. Control 控件添加 padding 属性；为保持兼容仍保留 inset。
   2. 删除 Label 的 textpadding 属性，用 Control 的 padding 代替。
   3. 删除 Container 的 inset/padding 属性，用 Control 的 padding 代替。
   4. 删除 Combo 的 textpadding 属性，用 Control 的 padding 代替。
   5. 删除 ListHeaderItem 的 textpadding 属性，用 Control 的 padding 代替。
   6. 删除 RichEdit 的 textpadding 属性，用 Control 的 padding 代替。
   7. Combo/List 的 itemtextpadding 属性，用 itempadding 代替，为保持兼容仍保留 itemtextpadding。
2. 优化部分控件边框问题。详见 2019-05-30 第5条。
3. 修复菜单宽度计算不正确的问题

2019-05-30
1. ListTextElement 添加下拉框属性(comboable)
   使用说明：
   1. 双击列表项，显示下拉框
   2. 下拉框展开、收起、选择项改变时，分别发送
    DUI_MSGTYPE_DROPDOWN/DUI_MSGTYPE_DROPUP/DUI_MSGTYPE_ITEMSELECT，由开发人员保存数据
   3. 下拉框样式为默认的下拉框样式，可以获取下拉框指针以定制样式
2. ListTextElement 支持编辑框/下拉框，List 滚动时，隐藏编辑框/下拉框
3. ListTextElement: 修复 下拉框收起时，没隐藏的问题
4. ListTextElement: List 改变大小时，重新计算编辑框/下拉框的位置、大小
5. 布局控件：子控件不占用边框的位置
   说明：布局控件设置边框不为0，如果不设置内边距，子控件会覆盖边框。
    修改后，计算子控件位置时，会自动排除边框的位置。
    除非子控件设置的固定大小，并且比布局还大，才会覆盖边框。

2019-05-25
1. 修复 GetSubItemPos 获取的列表项矩形会遮住垂直滚动条的问题。
2. 修复一处特效显示逻辑判断问题
3. ListTextElement 添加可编辑属性(editable)
   使用说明：
   1. 双击列表项，显示编辑框
   2. 按回车隐藏编辑框；发送消息 DUI_MSGTYPE_RETURN，由开发人员保存数据
   3. 编辑框样式为默认的编辑框样式，可以获取编辑框指针以定制样式

2019-05-19
1. 修复 List 控件 GetSubItemPos 获取列矩形错误的问题。

2019-05-14
1. List控件的 ischeckbox 属性改名为 checkable
2. Edit 废弃 witelist 属性；charfilter 属性合并 witelist，并支持设置过滤字符集合。
   示例：charfilter="true,true,ABCDEF0123456789" 表示支持字符过滤、白名单模式、字符集为A-F0-9。
3. Edit 字符集合设置，增加去重。自动去掉字符集合中重复的字符。
4. Edit 控件 regexp 属性支持设置正则表达式。
   示例：regexp="true,[1-9]\.\d{0,1}" 表示允许输入整数部分为1到9,有一位小数的浮点数。

2019-04-24
1. 修复正则表达式引擎问题
   正则引擎修改自deelx，由于代码问题，当表达式包含 | 字符时会导致匹配失败。
2. 优化编辑框的输入体验
   重新优化了过滤流程，修复了上一版引入的一些问题。
   1. 保证 TEXTCHANGED 消息在越界检查、字符过滤、正则过滤之后发送
   2. 添加属性控制仅数字模式时越界检查的延时时间
   3. 仅数字模式，按回车、失去焦点时，立即执行越界检查，并发送 TEXTCHANGED 消息
3. 更新 miniblink49 到版本 19.3.28.1(2019-4-10发布)

2019-04-19
1. 优化编辑框的输入体验
   1. 保证 TEXTCHANGED 消息在越界检查、字符过滤、正则过滤之后发送
   2. 添加属性控制仅数字模式时越界检查的延时时间
   3. 仅数字模式，按回车、失去焦点时，立即执行越界检查，并发送 TEXTCHANGED 消息
2. 编辑框仅数字模式，优化粘贴操作

2019-04-16
1. 编辑框数值范围限制检查定时器由500毫秒改为300毫秒
   该特性 2019-01-11 引入，在某些依赖该特性的情况下，导致响应速度较慢。
   比如：编辑框限制为数字，程序在TEXTCHANGED事件中根据输入内容处理一些逻辑，
   此时必须启用延时通知属性(delaytxtchange)，并且延时必需大于300毫秒。
   否则，程序取到的内容可能是错误的。

2019-03-23
1. 更新 miniblink49 到版本 19.3.18.1
2. 深度整合 miniblink49 API(wke)
    1. 字符串统一使用 CDuiString
    2. 剔除 wke v1 版本的接口，只保留 v2 的接口

2019-03-14
1. 修复编辑框粘贴问题
   问题说明：
   当待粘贴内容满足编辑框过滤条件，但再加上编辑框现有内容，又不满足过滤条件时，仍然允许粘贴到编辑框。
   比如：编辑框只允许输入带小数点的小数，现有内容为 0.65，粘贴内容为 0.3，该问题允许 0.3 粘贴到编辑框中。

2019-03-03
1. 更新 miniblink49 到版本 19.2.26.1

2019-02-18
1. 更新 miniblink49 到版本 19.2.12.1

2019-02-16
1. 修复获取指定菜单项信息函数错误处理问题。

2019-02-15
1. 修复菜单显示位置问题
   说明：当菜单超出屏幕边缘时，自动调整其位置，保证显示在屏幕内。
         多显示器时可能存在问题。
2. 修复菜单通知消息缺少菜单项是否选中信息
   说明：
   1. 有两种接收菜单项消息的方法：
      一是Notify中处理消息DUI_MSGTYPE_MENUITEM_CLICK，二是HandleCustomMessage中处理消息WM_MENUITEM_CLICK。
   2. 参数说明：WPARAM 表示菜单项的 tag，LPARAM 表示菜单项是否选中状态
   3. CMenuWnd::s_strName 表示菜单项名字 CMenuWnd::s_strUserData 表示菜单项用户数据 CMenuWnd::s_ptrTag 表示菜单项 tag
3. 菜单添加获取指定菜单项信息的接口
4. 菜单添加向指定窗口发送指定菜单项消息的接口
5. 优化系统托盘类，托盘菜单使用DuiLib实现。

2019-01-21
1. 更新xml，提供了图片属性(dest,align,valign)的新用法。
   1. left=0,right=-1,align指明图片在控件内的水平对齐方式；其它表示在目标范围内的对齐方式
   2. top=0,bottom=-1,valign指明图片在控件内的垂直对齐方式；其它表示在目标范围内的对齐方式
2. 更新观察者模式通知接口
   说明：返回值由 void 改为 bool；返回 true 由继续通知其它观察者，否则终止该通知消息。

2019-01-18
1. 添加系统托盘图标
   说明：此为试验功能；菜单使用的是系统菜单，而不是Duilib的菜单。

2019-01-11
1. 修复编辑框数值范围限制问题
   说明：假如数值范围是 40~200，则输出入 5 时立即自动变为 40，没办法正常输入。
2. 优化属性解析
   1. 提取属性解析接口，所有属性统一解析
   2. SIZE 属性支持 1/2 个值。只有一个值时表示两个值相等
   3. RECT 属性支持 1/2/3/4 个值，分别表示左上右下。1值表示4个值相等，2值表示左右、上下值相等，3值表示上下值相等
   4. BYTE/WORD/INT/DWORD/UINT/DWORD_PTR 属性，支持 0xE 十六进制写法

2019-01-07
1. 修复子窗体没有自动销毁的问题
2. 修复 Combo 禁用状态不能通过代码修改当前选择项的问题

2019-01-04
1. 修复 autowidth/autoheight 属性的bug
   说明：Label 及其父控件都启用 autowidth，当切换语言时，由于不同语言宽度不同，Label 控件显示不完整。

2018-12-28
1. 修复观察者模式导致的崩溃
   观察者模式内部没有对观察者列表进行保护，多线程环境下可能导致程序崩溃。

2018-12-26
1. 修改 Image 属性中的 dest(left,top,right,bottom) 含义。
   原始定义：表示相对于控件 left/top 的偏移量，向控件内偏移为正数
   新的定义：left/top 含义不变；right/bottom 为0/正数时含义不变，负数时表示相对 right/bottom 向左/上的偏移量
2. 同步官方更新(c3985f0)
   1. 修复 CListBodyUI::SortItems 没有保存用户参数的的问题
   2. 修复因资源文件被占用导致的句柄泄露问题
3. 修复 CDuiString 赋值构造函数自已给自己赋值的问题
4. 优化多语言字符串翻译。如果没有对应语言包则显示ID

2018-12-19
1. 修复 2018-12-14 日引入的菜单不显示问题
2. 修复 Edit 控件字符过滤问题
   说明：启动字符过滤时，有时会把某些可打印字符排除在过滤范围之外。

2018-12-17
1. 修复边框样式属性不起作用的问题

2018-12-14
1. 解决模态弹框启用阴影时，单击父窗口会失去焦点，停止响应键盘事件的问题
2. Control 添加修改 Cover 大小的接口，用于需要部分遮挡父控件的场景

2018-12-10
1. 解决边框重复绘制问题
2. 解决背景色渐变绘制到边框区域的问题

2018-12-07
1. 解决 Label 控件启用 cover 属性时空指针问题
2. 修改 Image 属性中的 dest(left,top,right,bottom) 含义。
   原始定义：表示相对于控件 left/top 的偏移量，向控件内偏移为正数
   新的定义：left/top 含义不变；right/bottom 为正数时含义不变，非正数时表示相对 right/bottom 的偏移量
3. 布局控件 padding 属性改为内边距，用于取代 inset 属性，外边距统一使用 Control 控件的 margin 表示
   以保持属性命名符合 IE 盒子模型
4. 使一般控件和布局控件都支持 margin 属性
5. 修复渐变方向属性 direction 没有初始化的问题

2018-10-31
1. 解决编辑框过滤模式的bug
   表现：1.按CTRL+字符，会删除编辑框最后一个字符 2.按方向键，光标自动设置到最后一个字符

2018-10-25
1. 解决 GetMultiLanguageString 可能导致的程序崩溃
   原因说明：函数参数无效时返回空指针，使用该函数的地方，可能因为空指针面导致程序崩溃。

2018-10-24
1. 解决组合框隐藏时，修改当前选择项导致当前选择项丢失，什么都不显示的问题
2. 解决Slider禁用状态响应鼠标滚轮消息的问题

2018-10-22
1. 修复 CDuiString 可能导致编译失败的问题（同步自官方库
2. 修复 CContainerUI::DoPaint 绘制区域超出指定范围的问题（同步自官方库）

2018-09-19
1. 优化水平、垂直布局自动计算宽、高属性的行为
   问题描述：启用自动计算宽、高属性，子控件隐藏时，仍然会计算其宽、高，导致显示大片空白。

2018-09-18
1. List 控件添加根据Tag/UserData查找列表项索引/指针的接口
   FindItemByTag,FindItemByUserData,GetItemByTag,GetItemByUserData

2018-09-17
1. 修复 2018-09-15 引入的默认属性解析问题
2. 优化控件默认字体颜色
3. Container 添加接口 GetItemByTag/GetItemByUserData
4. 解决 IPAddress 控件bug
   描述：连续在不同的字段单击，第三次及以后单击的字段没有出现编辑框

2018-09-15
1. 优化默认属性
   1. Include 增加 style 节点，为 true 时表示引入的xml是控件默认属性。
   2. Window 属性也支持控件的默认属性机制。
   3. 解析窗体的 xml 文件时，节点解析顺序：Include,Default,Font,Image,Window,其它。

2018-09-14
1. 动态库改用动态链接运行时库

2018-09-13
1. 移除TreeView头文件引入的STL头文件，并修复相关编译问题
2. 修复控件显示隐藏时意外执行到动画代码的问题

2018-09-06
1. 解决无边框窗口在双屏下面（副屏分辨率大于主屏）时，最大化不正确的问题

2018-09-04
1. INLINE 宏改名为 DUI_INLINE

2018-09-01
1. 解决使用资源中的zip文件,不能换肤的问题

2018-08-30
1. 解决编辑框多行模式下焦点与非焦点时显示不一致问题
   原因：本地控件默认添加了 ES_AUTOHSCROLL 属性，一行显示的内容比 CEditUI 多；
         CEditUI 需要换行显示，而本地控件一行就可以显示（HOME/END/LEFT/RIGHT移动光标）
2. 优化菜单。增加获取菜单实例的接口，方便由用户扩展 duilib 内部菜单。
3. RichEdit 添加默认菜单，支持简体中文、英文
   已知问题：菜单文字透明。
   原因：不支持 宋体、新宋体，而 duilib 默认字体是 SimSun（新宋体）
   解决方法：
   1. 设置共享默认字体为 微软雅黑，全局生效；
   2. 菜单XML文件中设置默认字体为 微软雅黑，单个菜单生效。
4. 优化编辑框粘贴操作时的字符过滤
   输入字符过滤的处理：为了支持正则过滤，先输入，再过滤。
5. 解决ANSI版本编译问题
6. 优化 RichEdit 默认菜单状态
7. RichEdit 失去焦点时，默认不隐藏选中文本

2018-08-29
1. 解决编辑框多行模式下的问题
   1. 添加自动垂直滚动属性
   2. 把 \r 或 \n 分割的字符串，改为 \r\n 分割，使用本地编辑框和CEditUI的换行一致
   3. 用户添加新行后，自动重新计算CEditUI的宽、高
2. 修复编辑框过滤模式下，输入的非法字符仍然显示的问题
3. 解决 MenuDemo 去掉背景图后，子菜单样式与顶级菜单样式不一致的问题

2018-08-28
1. 解决 List 不支持 拖拽源、目的的问题
2. 解决 tag 属性值不能大于 0x7fffffff 的问题
3. 优化拖拽，添加支持 int32/int64 数据类型
4. 优化控件的SetText，支持空指针
5. 更新属性表文件
6. Edit控件添加支持多行文本
   已知存在的问题：本地控件需要\r\n换行,CEditUI使用\r或\n换行,导致两者显示不一致

2018-08-27
1.Container/List 增加范围删除子项接口
2. 解决崩溃问题
   2018-08-27 因修复滚动条不显示问题引入了该问题。
3. 编辑框光标自动显示在最右侧
   编辑框处于焦点状态，设置编辑框文本时，光标默认在最左侧。
4. 优化密码强度检测控件
5. 修复 ListTextElement 多语言支持问题
6. 修复 List 水平滚动条问题
   2018-08-15 引入该问题

2018-08-24
1. 解决滚动条不显示的问题
   2018-08-15 优化共享/私有默认属性引入了该问题。
2. 解决子窗口不随滚动条移动位置的问题

2018-08-22
1. 根据 Tag/UserData 查找子控件，查找失败时返回-1
2. 解决父子窗口同时显示焦点控件的问题
3. 修复快捷键问题
   问题描述：
   1. 2018-08-19 编辑框不响应TAB切换焦点的问题
   2. 2018-08-06 编辑框中无法输入其它控件的字母快捷键
   解决方法：
   1. 快捷键设置，如果是单字母，则自动添加 ALT；不支持 SHIFT + 字母 的快捷键。
   2. 执行快捷键时，如果是非编辑框控件，则添加 ALT 按键
   3. 快捷键支持的形式：CTRL[+SHIFT][+ALT]+字母；SHIFT+ALT+字母；ALT+字母；字母。
4. 优化拖放
5. 优化 SkinViewer
6. 修复使用快捷键从编辑框切换到其它控件时，编辑框中的本地控件没有销毁的问题

2018-08-21
1. 布局控件启用/禁用时，其子控件同时启用/禁用
2. Combo控件添加收起通知

2018-08-20
1. 解决子菜单与顶级菜单样式不一致问题。
   Demo中，子菜单圆角修复
   方法一：菜单窗体中使用分层窗口，即 layered 属性设置为true
   方法二：菜单窗体属性 roundcorner，设置与菜单背景图片边角合适的值
2. 解决属性表文件中特效属性名错误问题
3. 格式化特效代码文件，并移除多余的文件
4. 解决特效播放完毕没有解决控件重绘，导致控件显示内容没有更新的问题
5. 解决在子窗体上按TAB，父窗体切换焦点的问题
6. 去掉;前的空格

2018-08-19
1. 属性 focusbordercolor 改名为 focusedbordercolor
2. 修复布局控件自动计算宽度时，没有计算外边距的问题
3. 修复 valign 属性默认值没有生效的问题
4. 修复没有窗体关闭特效时，窗体无法关闭的问题
5. 修复快捷键导致编辑框不响应TAB切换焦点的问题
6. 窗体添加默认焦点控件属性 focusedctrl，窗体焦点自动落在该属性指定的控件上
   窗体焦点控件的设置：SetFocusNeeded
   已知问题：
   1. 存在子窗体时，父窗体Edit设置焦点无效；
   2. 子窗体TAB键切换焦点时，焦点转移到父窗体。

2018-08-18
1. 修复“添加背影图片对齐属性(5f1ad0d)”引入的DoPaint绘制逻辑错误。
2. 添加特效支持，5种特效触发器，84种特效。已知存在的问题：
   对于非分层窗体，非特效覆盖部分：显示特效时是黑色，隐藏特效时显示异常。
   解决思路：从特效算法中生成描述窗体形状的RGN，绘制特效时设置窗体RGN。
3. 修复控件首次显示时特效问题

2018-08-16
1. 属性中的img统一改为image
2. Slider 添加通知消息DUI_MSGTYPE_VALUECHANGING
   该消息说明用户正在拖动Slider，由用户决定怎么处理值变化
3. 修复 Combo 控件展开后不会自动定位到上次选择的位置的问题
4. Slider 鼠标滚轮事件，先发送DUI_MSGTYPE_VALUECHANGING，延时300毫秒再发送DUI_MSGTYPE_VALUECHANGED

2018-08-15
1. 优化定时器ID分配
2. CDuiValArray 添加接口，支持根据 Item 指针执行删除操作
3. UIRender 添加接口返回 AlphaBlend 函数地址
4. 优化函数 CreateARGB32Bitmap，GenerateBitmap
5. 优化 共享/私有 默认属性。
   GetDefaultAttributeList 接口添加参数 bShared，标识获取 共享/私有 默认属性。
   创建控件时，先添加 共享 默认属性，再添加 私有 默认属性，最后添加与控件写在一起的属性。
   以此形成 3 个优先级的属性设置，从低到高为：共享默认属性，私有默认属性，与控件写在一起的属性。
   应用场景说明：
   1. 共享默认属性写到一个单独的文件中，在窗体描述 XML 文件中，使用 Include 引入，实现全局样式统一；
   2. 在窗体描述文件中，使用 私有默认属性，增加/覆盖 共享默认属性，实现窗体之间的自定义；
   3. 在窗体描述文件中，同一类型的控件需要不同样式时，直接与控件写在一起，实现窗体内控件的自定义。
6. 添加属性 selectedbordercolor 表示控件处于选择状态时的边框颜色
7. 修复一处关闭子窗体可能导致崩溃的bug
8. 移除菜单控件中一个多余的属性列表设置接口
9. 修复 共享/私有 默认属性设置顺序错误的问题。

2018-08-07
1. 解决启用字符过滤的Edit中按回车键删除字符的问题
2. 优化定时器ID分配

2018-08-06
1. 修复快捷键问题
   问题描述：Edit设置快捷键E，RichEdit设置快捷键R，在RichEdit中按下E键时，焦点自动切换到Edit。
   仍存在的问题：焦点从Edit/IpAddress使用快捷键移到按钮（鼠标位于Edit上，并且光标仍在编辑框中），
     再移到RichEdit，光标位置错误。
2. 修复Label及派生类支持多行时，总是自动计算宽度的问题

2018-08-03
1. 优化子窗体占位符控件设置
2. 自动计算宽度、高度属性，变量定义移到Control根控件
3. 绝对布局控件，添加支持自动计算宽度、高度属性

2018-08-02
1. tag属性支持16进制写法
2. 解决子窗体框架错误用法可能导致的程序崩溃
3. 修复padding属性设置的bug
4. 解决容器子控件超出边框，但仍在外边距范围内，无法绘制的bug

2018-08-01
1. 修复编辑框焦点时不显示 tooltip 的问题。
2. 解决子窗体切换的时序，保证当前子窗体关闭前，执行 OnDataSave，再切换到新的子窗体。
3. 修复一处GDI对象泄漏问题。
4. 修复1导致有时鼠标移动到控件上时没有触发鼠标进入事件的问题。

2018-07-27
1. 添加 设置/获取 拥有者窗口句柄的接口。
   用于解决子窗口弹出的模态对话框销毁后，焦点转移到子窗口的父窗口的问题。
   默认情况下，子窗口不能作为模态对话框的拥有者。
   用法：模态对话框创建成功，显示之前，调用 SetOwner 把子窗口设置为弹出的模态对话框的拥有者。
2. 修复 1 引入的菜单bug。
3. 优化菜单，使其行为与 VS2013 相似。
4. 修复 GetParent 返回值问题。

2018-07-26
1. Button 控件支持 5 态背景色
2. Option 控件支持 选中/未选中 各 5 态背景色
3. Button/Option 支持拖放。

2018-07-25
1. 密码强度控件添加接口返回当前密码的强度。
2. 解决菜单弹出速度慢的问题。
   原因：DrawText 使用 CHDCHelper 解决字体穿透问题，但 CHDCHelper 速度很慢。
   解决：DrawText 计算文本占用矩形时，不使用 CHDCHelper 。
3. 解决 Edit 控件错误删除字符的问题。
   现象：Edit 设置了字符过滤属性，没有设置过滤条件，在编辑框中按键，会删除编辑框设置的字符。

2018-07-23
1. 修复 UIDlgBuilder 默认图片导致的按钮(含单选/复选框)图片显示不正常的bug。
   显示不正常的表现为：不显示图片、显示未知区域的图像等。
   复现办法：
   1. 在默认样式xml文件中，添加需要共享的图片。如 <Image shared="true" file="close.png" />
   2. 在所有窗体的xml文件中, 使用 Include 引入默认样式的xml文件
   3. 在父窗体中创建模态对话框
   4. 关闭模态对话框
   5. 鼠标移动父窗体的按钮上，这时会发现按钮图片显示异常。

   原因：UIDlgBuilder 直接调用 UIManager::AddImage 添加共享图片，
   而AddImage内部会判断如果图片已添加会先Free前面添加的图片，再重新Load并添加，
   在此过程中没有做好资源保护，导致指针指向了非法地址。

2018-07-21
1. List 抬头默认左对齐
2. 修复 2018-07-14 引入的 DrawHtmlText 无法显示输出图片的问题。
3. 修复如果设置了属性 endellipsis，并且文本宽度大于控件宽度，DrawHtmlText 无法输出文本的问题。
4. 修复 TListInfoUI::bCheckBox 没在初始化导致列表项缩进不正确的问题

2018-07-20
1. 提供窗体数据修改状态的设置/查询接口
2. 优化浏览器控件绘制函数
3. 子窗体不创建阴影
4. 修复3引入的编译问题
5. 修复带复选框的List，复选框左对齐问题

2018-07-19
1. Label 文本默认属性由单行垂直居中改为单行，去掉垂直居中属性。
2. 解决 Label 多行时，不支持 垂直居中、靠下对齐问题。
3. Label,Text 控件全面支持多行时 垂直对齐。使用 valign 属性设置对齐方式。
4. 优化子窗口功能。

2018-07-18
1. 更新 miniblink49 到版本 18.7.16.1
2. 修复切换子窗口时，没有关闭前一个子窗口的问题
3. 修复一处 tooltip 导致的崩溃
4. 修复 DrawRoundRect bug
5. 添加 hotbordercolor 属性；优化边框绘制。

2018-07-17
1. CheckBox 添加属性 seltext（选中状态的文本），用于选中状态切换时，自动改变显示文本。
2. Window 添加属性 delayclick，控制单击/双击消息的系统特性。
   1. 默认false，系统默认特性，双击时发送单击再发送双击消息；
   2. true，系统区分单击/双击，双击时不会先发送单击消息，单击消息会有一个双击的最大时间间隔；
   3. 单击消息在首次弹起后发送；双击消息在第二次弹起后发送。
3. 添加右键单击、双击消息支持。
   控件需要用户添加单击、双击消息处理。
4. 修复控件外边距属性名。
   CSS盒子模型中，外边距用 margin 表示，因此表示外边距的 padding 统一改为 margin。
   duilib 使用的是 IE 的盒子模型，即控件的宽/高包含边框和padding；
   而标准的 W3C 盒子模型，宽/高不含边框和padding。
   以后需要时，可以为控件添加padding属性；此时textpadding在padding基础上计算。
5. 修复 单击/双击 冲突问题引入的新问题。
   鼠标在按钮上按下，移出按钮后弹起，仍会触发按钮单击消息。
6. Container 容器添加 margin 属性，等同于 padding 属性。
7. 规范消息定义

2018-07-16
1. 优化5态按钮背影图片属性设置。
   属性设置添加图片排列方向的参数，h|v 分别表示水平|垂直排列，与图片名用","分割。
   比如：fivestatusimage="v,five.png"
2. 按钮响应频率限制为[0,100]秒。
3. 图片添加 align|valign 属性，指明图片 水平|垂直 对齐方式，不会拉伸图片，会使 xtiled/ytiled 失效。

2018-07-15
1. 解决鼠标左键单击、双击冲突：双击时不发送单击消息，按下/弹起消息只处理控件状态。
   鼠标单击时，控件收到的消息：按下、弹起、单击
   鼠标双击时，控件收到的消息：按下、弹起、双击按下、弹起、双击
2. 按钮添加响应频率控制属性：下一次响应鼠标/键盘需要等待的秒数，0 表示关闭该特性。
   启用该特性后，按钮响应鼠标/键盘事件后，自动置为禁用状态，等待指定的秒数后，恢复为可用状态。
3. 统一定时器ID。DuiLib保留使用范围 [0~1023]，用户使用范围 {1024,}
4. 修复List没有表头时崩溃的问题。添加单击表头第一列。选择所有行功能时引入的。
5. 添加子窗体支持模型，详见类 CWndImplBase。
   支持同时最多显示一个子窗口；
   支持子窗口在父窗口占位布局控件大小/位置变化时自动改变大小/位置；
   支持类似 tab 标签页，每个标签页对应一个子窗口，用户单击控件时，调用 SwitchChildDlg 自动切换到关联的子窗口。

2018-07-14
1. 修复 DrawHtmlText 使用 gdi 时 aplha 值无效问题。

2018-07-12
1. 修复 DrawLine,DrawRect,DrawRoundRect,DrawText 4个函数使用 gdi 时 alpha 值无效问题。
   DrawHtmlText 仍然存在问题。

2018-07-09
1. 解决伪异形窗体中，RichEdit 光标不显示的问题。
   仍然存在的问题：文字穿透。
2. 解决 layered 属性设置问题
3. 解决伪异形窗体中，RichEdit 文字穿透问题。
4. 解决由于延时设置焦点到第一个控件，导致程序刚启动后鼠标在RichEdit上单击，焦点跑到第一个Edit控件，
   再次单击才能获取焦点的问题。
5. 优化RichEdit，禁用多行文本时，提示文件垂直居中。
6. 更新 miniblink49 到版本 18.7.5.1

2018-07-07
1. 优化标题栏判断，允许用户添加静态控件。
   当鼠标在标题栏上的静态控件上时，NcHitTest 返回 HTCAPTION，可以拖动窗体。
2. 解决伪异型窗体背影色穿透问题（RichEdit 仍然存在问题）。

2018-07-06
1. layeredimage 属性折分为 layered 和 shape 两个属性，layered 决定是否启用分层窗体，shape 用图片指定窗体形状。
   有两种方法创建异形窗体：layered + shape  和 layered + 根布局的 bkimage 属性。
   前者：图片可视区域范围外的控件（部分），无法显示，真异形。
   后者：图片可视区域范围外的控件（部分），可以显示，伪异形。字体/背影色上单击鼠标，以穿透窗体。
2. 标题栏高度设置，-1表示全窗口
3. 解决伪异形窗体，字体穿透问题，必须使用GDIPLUS。

2018-07-05
1. 优化duilib CWndImplBase::OnCreate，避免重复设置资源路径。
2. 浏览器控件添加前进/后退可行性判断接口

2018-07-04
1. 添加浏览器控件。有如下特点：
   1. 该控件是基于开源库 miniblink49 开发的，使用 wke 接口。
   2. duilib 在需要时动态加载 MB ,不需要时卸载。这样使得不需要浏览器控件的应用，不必附带 miniblink 库。
   3. duilib 将 wke 的接口重新导出,这样使用 duilib 的应用可以直接使用 wke 接口。
2. 添加浏览器控件 demo，优化浏览器控件
3. 添加 2018-06-28 版本的 miniblink(node.dll)

2018-07-01
1. 更新工程配置：ANSI 工程添加后缀 a，UNICODE 工程去掉后缀 u

2018-06-28
1. Button，Option，CheckBox，RadioBox，Text，HotKey，PwdCheck  支持特效字。

2018-06-27
1. 添加 autoheight 属性, 支持该属性的布局：CContainerUI，CVerticalLayoutUI

2018-06-25
1. CEditUI 添加内容变化延时通知属性(delaytxtchange)，可以指定延时多少毫秒后发送通知

2018-06-17
1. 修复一处拖拽功能可能引发的崩溃
2. 更新文件头注释格式

2018-06-15
1. 解决“修复Capture相关bug”引入的bug：在某些情况下会导致空指针引发崩溃。

2018-06-13
1. ListHBoxElement,ListContainerElement 及其派生类，List 启用 ischeckbox 时，实现如下特性:
   1. 可以查询指定列表项是否选中
   2. 提供接口设置所有列表项的选中状态，获取所有选中的列表项的索引
   3. 表头第一列是复选框时，用户单击该复选框，List 自动 选中/取消 列表中的所有项
2. 双击标题栏时，如果没有最大化/还原按钮，或者隐藏，则不执行窗口最大化/还原操作

2018-06-12
1. 解决上次提交遗留的，默认画笔样式画圆角边框，宽度不够的问题。
   说明：4个边框都存在时，采用默认或用户设置的画笔样式；否则强制采用特殊样式画笔。
         在不设置画笔样式时，各种边框粗细组合都能适配。

2018-06-10
1. 增强快捷键定义。支持形如 CTRL+ALT+P 的快捷键。
2. 解决TreeNode不支持Default设置默认属性的问题。
   默认属性的写法有所改变，folderattr 等复合属性的值用 ? 包起来，如下所示：
   <Default name="TreeNode" value="text=&quot;abc&quot; folderattr=?width=&quot;16&quot; height=&quot;16&quot; ? " />
3. 优化菜单项单击消息：1上下文菜单通知改为异步 2菜单项单击消息在wParam参数中携带鼠标位置信息客户(坐标)
4. 优化控件边框颜色绘制，允许只绘制部分边框。

2018-06-09
1. 解决 CLabelUI 更新显示字符串后，不会自动计算宽度的问题。
   只要设置了自动计算宽度，不论有没有设置宽度，都会自动计算宽度。
2. CButtonUI，COptionUI，CCheckBoxUI，CRadioBoxUI 添加支持自动计算宽度
3. 背影色渐变，支持水平、垂直渐变
4. 解决切换语言时，带自动计算宽度的控件没有重新计算宽度的问题
5. 最大控件宽度使用宏定义

2018-06-08
1. CListUI 添加属性 ischeckbox/unselimg/selimg, CListTextElementUI 做为列表项时支持复选框多选；
   CListContainerElementUI 及其派生类，不支持该特性。
2. CButtonGroup 支持设置控件选择状态
3. 添加菜单阴影

2018-06-06
1. 多语言字符串的写法由 %{}修改为 %[]。原因是 {} 是duilib内嵌html支持的标签引导符。
2. 代码文件转换为 UTF-8 BOM
3. 优化工程配置

2018-06-04
1. 从 duilib/duilib 同步代码(e026aa0)：
 1. 修复创建窗体阴影的bug
 2. 定义宏 DUI_DEPRECATED 用于将不建议使用的方法标记为已弃用
 3. 修复某些 DPI 设置下图标模糊
 4. 退出消息循环时，返回退出参数
2. 支持 autowidth 属性的布局：CContainerUI，CHorizontalLayoutUI，CHWeightLayoutUI
   支持 autowidth 属性的控件：CLabelUI,CTextUI,CEditUI,CDateTimeUI
3. 支持拖放的控件：CControlUI,CActiveXUI,CFlashUI,CGifAnimUI,CLabelUI,CTextUI
   支持 放 的控件：CEditUI
4. 修复编辑框焦点状态显示tooltip，引入的不能选择内容的问题
5. 代码文件转换为 UTF-8 BOM

2018-05-23
1. 单击事件统一在 左键或右键弹起时发送
2. CDuiString 内部字符数组初始长度由63改为31
3. 修复Capture相关bug
4. 优化 ActiveX/Flash 控件
5. 修复编辑框获得焦点后，不显示Tooltip的问题

2018-04-25
1. 扩展CTileLayoutUI，添加childrounded/rows属性，支持子控件铺满布局
2. 扩展COptionUI，添加bindtablayout/bindtabindex属性，支持自动切换tab页面
3. 添加拖拽支持。
4. List 添加双击事件

2018-04-15
1. 修复菜单控件bug
2. RichEdit 添加默认提示信息及其颜色属性，用户输入文本后消失
3. CListHeaderItemUI 改从 CContainerUI 继承，支持添加子控件
4. 给 CContainerUI 和 CLabelUI 添加 autowidth 属性，所有从这两个控件继承的控件，都会受影响
   1. 已验证的控件：CLabelUI,CTextUI,CEditUI
   2. 已验证的布局：CContainerUI,CHorizontalLayoutUI
   3. 不支持的控件：CRichEdit,CVerticalLayoutUI

2018-04-09
1. 融合窗体阴影类，可以在 xml 中设置窗体阴影。支持算法/图片阴影。
2. 优化 GdiPlus 用法，使用宏 USE_GDIPLUS 控制
3. RadioBtn 改为 RadioBox
4. CWndImplBase 添加窗口初始化虚函数，在窗口创建成功后，数据初始化之前调用
5. 优化 CWndImplBase，窗体创建|显示 / 销毁|隐藏 时调用数据初始化 / 保存接口
6. CWndImplBase 添加 OnPrepare 虚函数，窗体布局正确初始化时调用
7. Container 添加根据 Tag/UserData 查找子控件接口
8. Combo 添加根据 Tag/UserData 选择子项接口
9. 为单选按钮添加 CButtonGroup 帮助类

2018-04-02
1. 添加带权重的水平布局控件
   1. 控件没有设置大小：平均分配多余的空间，直到不显示
   2. 空间不足时，按权重从小到大的顺序，缩减控件可调整的空间至最小
   3. 如果空间仍旧不足，按权重从小到大的顺序，依次隐藏控件
   4. 注意：Edit控件拥有窗口句柄，因此需要放在布局控件中，给布局控件设置权重，才能支持该特性

2018-03-29
1. 优化多语言支持
2. 添加颜色透明显示

2018-03-23
1. 添加 IP 控件
2. 去掉 nativebkcolor 属性，与 bkcolor 属性值保持一致

2018-03-07
1. 添加密码强度检测类 CPwdCheckUI
2. 修复编辑框仅输入数字且最小值是0时，可以输入一串0的问题；删除数字左侧无意义的0

2018-02-27
1. 更新 XUnzip 库，添加头文件、_USE_32BIT_TIME_T(使用32位time_t)
2. 更新 CGifAnimUI 类，使用 stb_image 重新实现

2018-02-03
1. 属性 regexp，支持编辑框使用正则表达式过滤输入

2018-01-30
1. 修复图片平铺绘制问题
2. 优化复选框控件，5态按钮
3. 添加单选框控件，5态按钮
4. Button 添加鼠标悬浮状态背景色，Option 添加选中时鼠标悬浮、正常状态背景色

2018-01-28
1. 调整目录结构
2. 编辑框添加属性 itemendellipsis
3. 添加字符过滤功能

2018-01-25
1.  修复多语言切换问题
2.  从工程中移除 CWebBrowserUI
    Control/UIWebBrowser.cpp, Control/UIWebBrowser.h, Utils/WebBrowserEventHandler.h

2017-07-22 
1.  Edit 添加 minmaxnumber 属性，检测数字模式时是否越界

2017-02-25 
1.  调整工程目录结构，include/duilib 为引用duilib的头文件目录，src为duilib源码目录
2.  动态库工程添加静态库工程配置，删除静态库工程文件；DuiLib 静态链接运行库
3.  重新校准属性列表，省略继承自父类的属性
4.  完善多语言支持，添加多语言 XML 文件属性及加载
5.  添加观察者模式
6.  添加 HotKey 控件
7.  添加 Menu 控件，支持动态增删菜单项、支持复选状态菜单项、支持键盘等功能，优化菜单属性，减少菜单 XML 编写复杂度
    菜单控件已知 bug：
    1.子菜单不能在 xml 文件中指定隐藏
    2.在Debug模式调试器中运行时，展开子菜单项，调试器收收到一条First Exception打印，但不影响使用
8.  使用新的菜单控件更新 MenuDemo/ListDemo 示例
9.  文本编辑框增加默认提示信息及其颜色属性，获取焦点时提示信息消失
10.  修复 List 控件 UIEVENT_KEYDOWN 事件响应中，case 语句没有 break 的 bug
11. 修改 Button/Text 上下文菜单消息，处理完后不直接return，而是传递给父控件。方便在复杂组合控件中响应上下文菜单。
12. 添加 Button/Control 左键双击消息

朱亚东
